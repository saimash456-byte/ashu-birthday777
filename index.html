<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>7 Days Left - Emergency</title>
    <style>
        :root { --red: #d90429; --blue: #00b4d8; --pink: #ff85a1; }
        body, html { margin:0; padding:0; overflow:hidden; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #000; color: white; }
        .stage { display:none; width:100vw; height:100vh; justify-content:center; align-items:center; flex-direction:column; text-align:center; position:absolute; padding: 20px; box-sizing: border-box; }
        .active { display:flex; animation: fadeIn 0.5s forwards; }

        /* Door */
        .door { width: 130px; height: 210px; background: #5d4037; border: 4px solid #3e2723; border-radius: 5px; position: relative; cursor: pointer; }
        .door::after { content: 'DOC ROOM'; position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: white; color: black; padding: 2px 8px; font-size: 0.6rem; font-weight: bold; }
        
        /* ECG Line Animation */
        .ecg-container { width: 100%; height: 150px; position: relative; overflow: hidden; background: #000; border-bottom: 2px solid #333; }
        .ecg-svg { width: 200%; height: 100%; stroke: var(--red); stroke-width: 3; fill: none; stroke-dasharray: 1000; stroke-dashoffset: 1000; animation: dash 3s linear infinite; }
        @keyframes dash { to { stroke-dashoffset: 0; } }

        /* Heart Beat */
        .heart { font-size: 80px; color: var(--red); cursor: pointer; animation: beat 0.8s infinite; }
        @keyframes beat { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        /* Pills */
        .pill-box { display: flex; gap: 20px; margin-top: 30px; }
        .pill { width: 80px; height: 40px; border-radius: 25px; cursor: pointer; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.8rem; }
        .disabled { opacity: 0.3; cursor: not-allowed; pointer-events: none; }

        /* Letter/Modal */
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:100; justify-content:center; align-items:center; padding:20px; box-sizing:border-box; }
        .modal-content { background:white; color:#222; padding:25px; border-radius:15px; width:100%; max-width:400px; text-align:left; position:relative; }
        
        .btn { background: var(--red); color:white; border:none; padding:15px; border-radius:8px; width:100%; font-weight:bold; margin-top:15px; cursor:pointer; }
        
        .hug-arms { font-size: 100px; text-align: center; animation: pulse 1s infinite alternate; display: block; }
        @keyframes pulse { from { transform: scale(0.8); } to { transform: scale(1.1); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="slide1" class="stage active">
        <div class="door" onclick="playKnock()">
            <div style="position:absolute; right:10px; top:50%; width:10px; height:10px; background:gold; border-radius:50%;"></div>
        </div>
        <h3 id="knockText" style="margin-top:20px;">KNOCK KNOCK</h3>
    </div>

    <div id="slide2" class="stage">
        <h2>"Ma'am ek emergency hai!"</h2>
        <button class="btn" onclick="nextSlide(2, 3)">Kia Hua?</button>
    </div>

    <div id="slide3" class="stage">
        <h2>"Banda bhagta aaya aur ye letter de gaya... bht serious halat hai!"</h2>
        <button class="btn" onclick="nextSlide(3, 4)">Check Patient</button>
    </div>

    <div id="slide4" class="stage">
        <div class="heart" onclick="triggerVibrate()">❤️</div>
        <p>Touch the heart to check pulse</p>
    </div>

    <div id="slide5" class="stage">
        <div class="ecg-container">
            <svg class="ecg-svg" viewBox="0 0 1000 100">
                <path d="M0,50 L50,50 L60,20 L75,80 L90,50 L150,50 L160,10 L180,90 L200,50 L300,50 L310,20 L325,80 L340,50 L1000,50" />
            </svg>
        </div>
        <h3 style="padding:20px;">"Tmne dil ko touch keya tu dekho teez hogai dharkan!"</h3>
        <button class="btn" onclick="nextSlide(5, 6)">Start Treatment</button>
    </div>

    <div id="slide6" class="stage" style="background: #f8f9fa; color: #333;">
        <h2>Aapne illaj ke liye in mein se ek dawa chunein:</h2>
        <div class="pill-box">
            <div id="pill1" class="pill" style="background:var(--blue);" onclick="openPill(1)">Memory</div>
            <div id="pill2" class="pill" style="background:var(--pink);" onclick="openPill(2)">Hug</div>
            <div id="pill3" class="pill" style="background:var(--red);" onclick="openPill(3)">Status</div>
        </div>
        <p id="counterInfo" style="margin-top:20px; font-size:0.8rem; color:#888;">0/3 Pills Taken</p>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <div id="modalBody"></div>
            <div id="testOther" style="display:none; text-align:center;">
                <p><b>Do you want to test other pills?</b></p>
                <button class="btn" onclick="closeModal()">Yes, Continue</button>
            </div>
            <div id="finalBtn" style="display:none;">
                <button class="btn" onclick="nextSlide(6, 7)">See Final Report</button>
            </div>
        </div>
    </div>

    <div id="slide7" class="stage">
        <h2>7 DAYS TO GO! ❤️</h2>
        <p>I love you forever, Ashu Janu.</p>
        <button class="btn" onclick="location.reload()">Reset Case</button>
    </div>

    <audio id="relax
